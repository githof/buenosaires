
# INSTALL

## SERVEUR 
Activer mod_rewrite de Apache2

    cmd: a2enmod rewrite
    cmd: service apache2 restart



Fichier de config Apache2 (site-enebled/000-default.conf)
Nécessite l'option AllowOverride All

    DocumentRoot /var/www
    <Directory "/var/www">
        Options +FollowSymLinks
        AllowOverride All
    </Directory>

## BBD
fichiers du dossier sql à importer ou copier-coller :													(17/03/21) 
    sql/tables_site.sql 
    sql/tables_metadata.sql
    sql/tables_data.sql sauf la table `variable` 																															(30/03/21) 
    (sql/tables-dump-2017.sql et sql/tables_tag_whatever.sql ne sont plus à jour)

## Code
ajouter un fichier /local-config.php contenant les infos de connexion à la 					(17/03/21) 
    bdd et le nom de ROOT :
        <?php
        // base URL for all relative URLs
        define("BASE_URL", "http://www.buenosaires.fr/");

        define("SQL_SERVER", '<serveur>');
        define("SQL_USER", '<user>');
        define("SQL_PASS", '<mdp>');
        define("SQL_DATABASE_NAME", 'buenosaires'); //	nom de la bdd 



# STRUCTURE DU CODE SOURCE

- structure de données dans src/class/model
- pages du site dans src/views/pages
- I/O dans src/class/io (y compris de et vers la base de données)

## Exemple d'accès à une personne

l'url personne/id (pareil pour acte/id) :
- charge le script pages/detail_personne.php
- un nouvel objet Personne est créé (donc classe model/Personne.php)
- il est rempli depuis la base par io/Database.php
la fonction from_db, qui dispatche selon la classe
-> c'est un peu moche, ce serait sans doute mieux d'en faire des méthodes spécifiques de chaque classe
