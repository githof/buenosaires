
Voir DROPBOX/Organisation/CR.txt

- balise mention
  signaler une personne présente (voir pex 5495, Manuel de la Torre)

-> bug droits (6 nov 2019)
  depuis changement accès 338ec04 dans config.php, seul un admin peut éditer le xml, je comprends pas pourquoi

-> export
   -> relation dans les deux sens
   - virer les accents (idéalement, option pour les garder)

-> erreurs (ponctuelles ?)
  -> pourquoi Basabilvaso apparaît dans l'acte 4789 ??
    (11 déc 2019, le prochain reset base va sans doute régler ça)
  - GREGORIO (de las Heras et de Espinoza)
  - Jose Manuel de ALTOLAGUIRRE
  (JOSE à virer du nom : fusion mal passée ?)
  - acte 4968 : la mère de l'épouse (Juana Belgrano !!) est sortie de la balise et les prénoms de l'épouse  sont incorrectement balisés
  - acte 8987 : acte caché, à extraire et créer + baliser 8987 (Gutierrez, Aguero, Dominga Gonzalez)
  - acte 7040 : acte caché, à extraire, créer et baliser (Belgrano)
  - acte 5911 : pourquoi le père de l'époux a un id mais n'est pas balisé ??
  - Ventura n'est pas un prénom (Juana, 13181)
  - FUSION : Maria Mercedes Sarratea 152, 683

-> recherche
  - sur plain text (pour baliser), avec liste d'actes comme la table
  - contenu

-> édition xml
  - attributs

-> edition nom d'une personne

+ sous-réseau
    - par exemple sur les résultats d'une recherche	de personnes

+ BUG fusion
    -> voir CR.txt 17 oct 2018 et commentaires dans fusion.php
    x exploration [|45]
    x découper html_fusion  [1h+|2h45]
      x code découpé [2h]
      x renommé html_fusion en html_preview_fusion
      x debug syntaxe [25]
      x test : prénoms et noms s'affichent pas (fixed) [20]

      -> séparer html, recherche ajax, et appel à fusion

    + exploration : comment est validé le formulaire preview ?!
    + réécrire proprement la fonction fusion
      - changer le nom de $personne_keep
      + mettre à jour tout ce qui concerne $personne_throw
        - conditions
        - voir comment ça se répercute sur le texte de l'acte
        - relations (idem pour texte de l'acte)

    - écrire quelques actes tests
    - voir comment est gérée (ou pas) la suppression d'actes (pas laisser des scories)
    - tester plein de cas (le problème c'est qu'il faudra ptet être sûr de pouvoir dissocier pour tester plein de fusions)

    NB : pour les tests, utiliser les url get :
    https://buenosaires.telecom-paristech.fr/fusion?personne-A=383&personne-B=419

    - quand ce sera réglé, voir CR.txt 31 oct 2017 pour reset base (et en nov 2018 aussi)
    - sinon faudra au moins remettre les deux relations supprimées le 16 oct 2018 (voir acte)
      et réparer Francisco Belgrano 419 (acte 6813)

+ admin
    -> problème de droits pour le log, y'a plus de log…
    -> fonction réinitialiser le mot de passe
    -> problème de chmod à la création de compte

+ code
    - optimiser l'export : Database->get_personnes
      (peut-être mettre dans select des trucs de from_db)
    - dispatcher io/Database.php/from_db() en méthode de chaque classe
    - factoriser html_personne_relations, voire dispatcher dans Personne
    - virer Personne->relations pour le remplacer complètement par _by_type
    - fermer les connexions à la base (j'ai l'impression qu'elles le sont rarement)

+ édition du xml
    - glitch sur la flèche gauche (remonter) quand le mot est petit,
    l'infobulle vient par-dessus le bouton en clignotant, difficile de le choper
    - recherche des personnes par le nom pour choisir l'id

+ xmlselect
    -> comment ça se passe pour les attributs ??
    - pour chaque élément, proposer une liste de couples
      attribut / valeur prédéfinis (dans tag_set.js),
      p.ex { "don" : "true" } pour les personnes
      et pour les noms { "attr" : "de la" }, { "attr" : "de" }
      "de los" et "del" (je crois)
    - BUG : l'info-bulle de la flèche pour sortir un truc de la balise,
      empêche parfois de cliquer sur le bouton la deuxième fois
    - info-bulle : parler ptet de "sortir de la balise" plutôt que
      "remonter" (confusion possible avec monter d'un cran verticalement)

+ export
    - gdf

+ import
    - vérifier ce qui se passe sur les noms (parfois ça doublonne)
    par ex Maria Mercedes Sarratea 152, 683)
    - supprimer les conditions ou relations si elles n'apparaissent pas dans l'acte (en cas de balisage erroné précédemment)

+ recherche
    -> BUG : toutes les personnes ne sortent pas (peut-être les noms trouvent en minuscule ?  Peut-être à la suite d'une dissoc ?).  Francisco Belgrano 383 et 419 (trouvés grâce à la recherche sur la page Dissoc)
    - input text en plus de la liste
    - possibilité de ne mettre que l'année
    - dans le résultat : faire apparaître explicitement le nom recherché

+ fusion
    BUG : il dit que la fusion a réussi même si elle n'a pas réussi (pb chmod par ex)
    - montrer le résultat à la fin (plutôt qu'une page vide)
    BUG : le nom s'affiche dans la liste des prénoms
    - confusion entre recherche et prévisualiser (désactiver le bouton
    tant qu'on n'a pas sélectionné deux)
    - pour la sélection des ids, faire en sorte que le formulaire qui puisse aussi marcher sans ajax

+ classes
    - supprimer des entrées (relations, conditions, etc.)
    - éditer les champs depuis les pages

+ modifs ponctuelles
    - Cristina
    - fusions Francisco Belgrano

+ base
    -> BUG en-tête <?xml version="1.0"?> en trop sur actes quand
    modifiés (peut-être par fusion, voir CR.txt 17 oct 2018)
    - recharger actes balisés en 2016-2017 et perdus au reinit
      (voir bricolages/diff-others, cf diff_with_newlines dans
      session.sh)
      bon, je crois qu'y en a genre 8, j'ai fait le 1086
      ATTENTION aux ids nouveaux
    - dump pour Access

+ interne
    -> sauvegarder le fichier de log dans history quand atteint la
        limite (Log.php)

+ site
    - "mit" à jour
    BUG : menu s'affiche pas sur IE
